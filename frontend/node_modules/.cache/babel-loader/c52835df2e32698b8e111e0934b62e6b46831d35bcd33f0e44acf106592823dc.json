{"ast":null,"code":"var _jsxFileName = \"D:\\\\PersonalProjects\\\\refer-n-play-tictactoe\\\\frontend\\\\src\\\\pages\\\\PlayPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Board from '../components/Board/Board';\nimport { aiMove } from '../ai/heuristicAI';\n\n// helpers\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst lines = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\nfunction checkWinner(board) {\n  for (const [a, b, c] of lines) {\n    if (board[a] && board[a] === board[b] && board[a] === board[c]) return board[a];\n  }\n  if (board.every(Boolean)) return 'draw';\n  return null;\n}\nexport default function PlayPage({\n  user,\n  onWinReward\n}) {\n  _s();\n  const [board, setBoard] = useState(Array(9).fill(null));\n  const [playerMark] = useState('X'); // player is X\n  const [aiMark] = useState('O');\n  const [status, setStatus] = useState('Your move');\n  useEffect(() => {\n    const winner = checkWinner(board);\n    if (winner) {\n      if (winner === playerMark) {\n        setStatus('You win!');\n        onWinReward && onWinReward();\n      } else if (winner === aiMark) {\n        setStatus('AI wins');\n      } else if (winner === 'draw') {\n        setStatus('Draw');\n      }\n    }\n  }, [board, playerMark, aiMark, onWinReward]);\n  function playerPlay(idx) {\n    if (board[idx] || checkWinner(board)) return;\n    const newBoard = board.slice();\n    newBoard[idx] = playerMark;\n    setBoard(newBoard);\n\n    // AI move (after tiny delay)\n    setTimeout(() => {\n      const winner = checkWinner(newBoard);\n      if (winner) return;\n      const move = aiMove(newBoard, aiMark, playerMark);\n      if (move >= 0) {\n        const nb = newBoard.slice();\n        nb[move] = aiMark;\n        setBoard(nb);\n      }\n    }, 250);\n  }\n  function reset() {\n    setBoard(Array(9).fill(null));\n    setStatus('Your move');\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Tic-Tac-Toe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Board, {\n      board: board,\n      onPlay: playerPlay\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: reset,\n      children: \"Reset\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(PlayPage, \"qHQV8q5gQj4/M+gTXl6juj7NRV8=\");\n_c = PlayPage;\nvar _c;\n$RefreshReg$(_c, \"PlayPage\");","map":{"version":3,"names":["React","useState","useEffect","Board","aiMove","jsxDEV","_jsxDEV","lines","checkWinner","board","a","b","c","every","Boolean","PlayPage","user","onWinReward","_s","setBoard","Array","fill","playerMark","aiMark","status","setStatus","winner","playerPlay","idx","newBoard","slice","setTimeout","move","nb","reset","children","fileName","_jsxFileName","lineNumber","columnNumber","onPlay","onClick","_c","$RefreshReg$"],"sources":["D:/PersonalProjects/refer-n-play-tictactoe/frontend/src/pages/PlayPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Board from '../components/Board/Board';\r\nimport { aiMove } from '../ai/heuristicAI';\r\n\r\n// helpers\r\nconst lines = [\r\n  [0,1,2],[3,4,5],[6,7,8],\r\n  [0,3,6],[1,4,7],[2,5,8],\r\n  [0,4,8],[2,4,6]\r\n];\r\n\r\nfunction checkWinner(board){\r\n  for (const [a,b,c] of lines){\r\n    if (board[a] && board[a] === board[b] && board[a] === board[c]) return board[a];\r\n  }\r\n  if (board.every(Boolean)) return 'draw';\r\n  return null;\r\n}\r\n\r\nexport default function PlayPage({ user, onWinReward }) {\r\n  const [board,setBoard] = useState(Array(9).fill(null));\r\n  const [playerMark] = useState('X'); // player is X\r\n  const [aiMark] = useState('O');\r\n  const [status, setStatus] = useState('Your move');\r\n\r\n  useEffect(() => {\r\n    const winner = checkWinner(board);\r\n    if (winner) {\r\n      if (winner === playerMark) {\r\n        setStatus('You win!');\r\n        onWinReward && onWinReward();\r\n      } else if (winner === aiMark) {\r\n        setStatus('AI wins');\r\n      } else if (winner === 'draw') {\r\n        setStatus('Draw');\r\n      }\r\n    }\r\n  }, [board, playerMark, aiMark, onWinReward]);\r\n\r\n  function playerPlay(idx){\r\n    if (board[idx] || checkWinner(board)) return;\r\n    const newBoard = board.slice();\r\n    newBoard[idx] = playerMark;\r\n    setBoard(newBoard);\r\n\r\n    // AI move (after tiny delay)\r\n    setTimeout(() => {\r\n      const winner = checkWinner(newBoard);\r\n      if (winner) return;\r\n      const move = aiMove(newBoard, aiMark, playerMark);\r\n      if (move >= 0) {\r\n        const nb = newBoard.slice();\r\n        nb[move] = aiMark;\r\n        setBoard(nb);\r\n      }\r\n    }, 250);\r\n  }\r\n\r\n  function reset(){\r\n    setBoard(Array(9).fill(null));\r\n    setStatus('Your move');\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Tic-Tac-Toe</h2>\r\n      <Board board={board} onPlay={playerPlay} />\r\n      <p>{status}</p>\r\n      <button onClick={reset}>Reset</button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}