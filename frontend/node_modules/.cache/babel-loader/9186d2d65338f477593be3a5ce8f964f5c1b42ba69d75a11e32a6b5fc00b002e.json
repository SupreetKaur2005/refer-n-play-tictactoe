{"ast":null,"code":"import _objectSpread from\"D:/PersonalProjects/refer-n-play-tictactoe/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import RegisterPage from'./pages/RegisterPage';import ProfilePage from'./pages/ProfilePage';import PlayPage from'./pages/PlayPage';import{applyReferral}from'./services/api';import axios from'axios';import{awardWin as sendWinReward}from\"./services/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[user,setUser]=useState(null);// on registration, store user in state\nfunction handleRegistered(u){setUser(u);}// when referral applied, backend returns new balances.\nfunction handleReferralUpdated(res){// update local user coins\nsetUser(prev=>_objectSpread(_objectSpread({},prev),{},{coins:res.yourNewBalance,referredBy:prev.referredBy||res.referrer}));}async function awardWin(){if(!(user!==null&&user!==void 0&&user._id))return;try{const res=await sendWinReward({userId:user._id});setUser(prev=>prev?_objectSpread(_objectSpread({},prev),{},{coins:res.newBalance}):prev);}catch(err){console.log(\"Win reward failed:\",err);}}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Refer & Earn \\u2014 TicTacToe Demo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:40},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(RegisterPage,{onRegistered:handleRegistered}),/*#__PURE__*/_jsx(ProfilePage,{user:user,onUpdated:handleReferralUpdated})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:/*#__PURE__*/_jsx(PlayPage,{user:user,onWinReward:awardWin})})]})]});}","map":{"version":3,"names":["React","useState","RegisterPage","ProfilePage","PlayPage","applyReferral","axios","awardWin","sendWinReward","jsx","_jsx","jsxs","_jsxs","App","user","setUser","handleRegistered","u","handleReferralUpdated","res","prev","_objectSpread","coins","yourNewBalance","referredBy","referrer","_id","userId","newBalance","err","console","log","style","padding","children","display","gap","flex","onRegistered","onUpdated","onWinReward"],"sources":["D:/PersonalProjects/refer-n-play-tictactoe/frontend/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport ProfilePage from './pages/ProfilePage';\r\nimport PlayPage from './pages/PlayPage';\r\nimport { applyReferral } from './services/api';\r\nimport axios from 'axios';\r\nimport { awardWin as sendWinReward } from \"./services/api\";\r\n\r\nexport default function App(){\r\n  const [user, setUser] = useState(null);\r\n\r\n  // on registration, store user in state\r\n  function handleRegistered(u) {\r\n    setUser(u);\r\n  }\r\n\r\n  // when referral applied, backend returns new balances.\r\n  function handleReferralUpdated(res) {\r\n    // update local user coins\r\n    setUser(prev => ({ ...prev, coins: res.yourNewBalance, referredBy: prev.referredBy || res.referrer }));\r\n  }\r\n\r\nasync function awardWin() {\r\n  if (!user?._id) return;\r\n\r\n  try {\r\n    const res = await sendWinReward({ userId: user._id });\r\n    setUser(prev => prev ? ({ ...prev, coins: res.newBalance }) : prev);\r\n\r\n  } catch (err) {\r\n    console.log(\"Win reward failed:\", err);\r\n  }\r\n}\r\n\r\n\r\n  return (\r\n    <div style={{padding:20}}>\r\n      <h1>Refer & Earn â€” TicTacToe Demo</h1>\r\n      <div style={{display:'flex', gap:40}}>\r\n        <div style={{flex:1}}>\r\n          <RegisterPage onRegistered={handleRegistered} />\r\n          <ProfilePage user={user} onUpdated={handleReferralUpdated} />\r\n        </div>\r\n        <div style={{flex:1}}>\r\n          <PlayPage user={user} onWinReward={awardWin} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"wIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,YAAY,KAAM,sBAAsB,CAC/C,MAAO,CAAAC,WAAW,KAAM,qBAAqB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,OAASC,aAAa,KAAQ,gBAAgB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,GAAI,CAAAC,aAAa,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAE,CAC3B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAEtC;AACA,QAAS,CAAAe,gBAAgBA,CAACC,CAAC,CAAE,CAC3BF,OAAO,CAACE,CAAC,CAAC,CACZ,CAEA;AACA,QAAS,CAAAC,qBAAqBA,CAACC,GAAG,CAAE,CAClC;AACAJ,OAAO,CAACK,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAEE,KAAK,CAAEH,GAAG,CAACI,cAAc,CAAEC,UAAU,CAAEJ,IAAI,CAACI,UAAU,EAAIL,GAAG,CAACM,QAAQ,EAAG,CAAC,CACxG,CAEF,cAAe,CAAAlB,QAAQA,CAAA,CAAG,CACxB,GAAI,EAACO,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEY,GAAG,EAAE,OAEhB,GAAI,CACF,KAAM,CAAAP,GAAG,CAAG,KAAM,CAAAX,aAAa,CAAC,CAAEmB,MAAM,CAAEb,IAAI,CAACY,GAAI,CAAC,CAAC,CACrDX,OAAO,CAACK,IAAI,EAAIA,IAAI,CAAAC,aAAA,CAAAA,aAAA,IAASD,IAAI,MAAEE,KAAK,CAAEH,GAAG,CAACS,UAAU,GAAMR,IAAI,CAAC,CAErE,CAAE,MAAOS,GAAG,CAAE,CACZC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEF,GAAG,CAAC,CACxC,CACF,CAGE,mBACEjB,KAAA,QAAKoB,KAAK,CAAE,CAACC,OAAO,CAAC,EAAE,CAAE,CAAAC,QAAA,eACvBxB,IAAA,OAAAwB,QAAA,CAAI,oCAA6B,CAAI,CAAC,cACtCtB,KAAA,QAAKoB,KAAK,CAAE,CAACG,OAAO,CAAC,MAAM,CAAEC,GAAG,CAAC,EAAE,CAAE,CAAAF,QAAA,eACnCtB,KAAA,QAAKoB,KAAK,CAAE,CAACK,IAAI,CAAC,CAAC,CAAE,CAAAH,QAAA,eACnBxB,IAAA,CAACR,YAAY,EAACoC,YAAY,CAAEtB,gBAAiB,CAAE,CAAC,cAChDN,IAAA,CAACP,WAAW,EAACW,IAAI,CAAEA,IAAK,CAACyB,SAAS,CAAErB,qBAAsB,CAAE,CAAC,EAC1D,CAAC,cACNR,IAAA,QAAKsB,KAAK,CAAE,CAACK,IAAI,CAAC,CAAC,CAAE,CAAAH,QAAA,cACnBxB,IAAA,CAACN,QAAQ,EAACU,IAAI,CAAEA,IAAK,CAAC0B,WAAW,CAAEjC,QAAS,CAAE,CAAC,CAC5C,CAAC,EACH,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}