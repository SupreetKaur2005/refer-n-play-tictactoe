{"ast":null,"code":"import React,{useState}from'react';import{applyReferral}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ApplyReferralForm(_ref){let{user,onUpdated}=_ref;const[code,setCode]=useState('');const[message,setMessage]=useState(null);const[err,setErr]=useState(null);const[loading,setLoading]=useState(false);async function submit(e){e.preventDefault();setErr(null);setMessage(null);setLoading(true);try{const res=await applyReferral({userId:user._id,code});setMessage(\"Applied! You earned \".concat(res.reward,\" coins. New balance: \").concat(res.yourNewBalance));onUpdated&&onUpdated(res);}catch(e){var _e$response,_e$response$data;setErr((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||'Failed to apply code');}finally{setLoading(false);}}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Referral Code\"}),/*#__PURE__*/_jsx(\"input\",{value:code,onChange:e=>setCode(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:\"Apply\"}),message&&/*#__PURE__*/_jsx(\"div\",{style:{color:'green'},children:message}),err&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:err})]});}","map":{"version":3,"names":["React","useState","applyReferral","jsx","_jsx","jsxs","_jsxs","ApplyReferralForm","_ref","user","onUpdated","code","setCode","message","setMessage","err","setErr","loading","setLoading","submit","e","preventDefault","res","userId","_id","concat","reward","yourNewBalance","_e$response","_e$response$data","response","data","error","onSubmit","children","value","onChange","target","required","type","disabled","style","color"],"sources":["D:/PersonalProjects/refer-n-play-tictactoe/frontend/src/components/ApplyReferralForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { applyReferral } from '../services/api';\r\n\r\nexport default function ApplyReferralForm({ user, onUpdated }) {\r\n  const [code, setCode] = useState('');\r\n  const [message, setMessage] = useState(null);\r\n  const [err, setErr] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function submit(e){\r\n    e.preventDefault();\r\n    setErr(null); setMessage(null); setLoading(true);\r\n    try {\r\n      const res = await applyReferral({ userId: user._id, code });\r\n      setMessage(`Applied! You earned ${res.reward} coins. New balance: ${res.yourNewBalance}`);\r\n      onUpdated && onUpdated(res);\r\n    } catch (e) {\r\n      setErr(e?.response?.data?.error || 'Failed to apply code');\r\n    } finally { setLoading(false); }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={submit}>\r\n      <div>\r\n        <label>Referral Code</label>\r\n        <input value={code} onChange={e=>setCode(e.target.value)} required />\r\n      </div>\r\n      <button type=\"submit\" disabled={loading}>Apply</button>\r\n      {message && <div style={{color:'green'}}>{message}</div>}\r\n      {err && <div style={{color:'red'}}>{err}</div>}\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,aAAa,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,cAAe,SAAS,CAAAC,iBAAiBA,CAAAC,IAAA,CAAsB,IAArB,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAAF,IAAA,CAC3D,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,GAAG,CAAEC,MAAM,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACpC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAE7C,cAAe,CAAAkB,MAAMA,CAACC,CAAC,CAAC,CACtBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBL,MAAM,CAAC,IAAI,CAAC,CAAEF,UAAU,CAAC,IAAI,CAAC,CAAEI,UAAU,CAAC,IAAI,CAAC,CAChD,GAAI,CACF,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAApB,aAAa,CAAC,CAAEqB,MAAM,CAAEd,IAAI,CAACe,GAAG,CAAEb,IAAK,CAAC,CAAC,CAC3DG,UAAU,wBAAAW,MAAA,CAAwBH,GAAG,CAACI,MAAM,0BAAAD,MAAA,CAAwBH,GAAG,CAACK,cAAc,CAAE,CAAC,CACzFjB,SAAS,EAAIA,SAAS,CAACY,GAAG,CAAC,CAC7B,CAAE,MAAOF,CAAC,CAAE,KAAAQ,WAAA,CAAAC,gBAAA,CACVb,MAAM,CAAC,CAAAI,CAAC,SAADA,CAAC,kBAAAQ,WAAA,CAADR,CAAC,CAAEU,QAAQ,UAAAF,WAAA,kBAAAC,gBAAA,CAAXD,WAAA,CAAaG,IAAI,UAAAF,gBAAA,iBAAjBA,gBAAA,CAAmBG,KAAK,GAAI,sBAAsB,CAAC,CAC5D,CAAC,OAAS,CAAEd,UAAU,CAAC,KAAK,CAAC,CAAE,CACjC,CAEA,mBACEZ,KAAA,SAAM2B,QAAQ,CAAEd,MAAO,CAAAe,QAAA,eACrB5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAA8B,QAAA,CAAO,eAAa,CAAO,CAAC,cAC5B9B,IAAA,UAAO+B,KAAK,CAAExB,IAAK,CAACyB,QAAQ,CAAEhB,CAAC,EAAER,OAAO,CAACQ,CAAC,CAACiB,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAAE,CAAC,EAClE,CAAC,cACNlC,IAAA,WAAQmC,IAAI,CAAC,QAAQ,CAACC,QAAQ,CAAEvB,OAAQ,CAAAiB,QAAA,CAAC,OAAK,CAAQ,CAAC,CACtDrB,OAAO,eAAIT,IAAA,QAAKqC,KAAK,CAAE,CAACC,KAAK,CAAC,OAAO,CAAE,CAAAR,QAAA,CAAErB,OAAO,CAAM,CAAC,CACvDE,GAAG,eAAIX,IAAA,QAAKqC,KAAK,CAAE,CAACC,KAAK,CAAC,KAAK,CAAE,CAAAR,QAAA,CAAEnB,GAAG,CAAM,CAAC,EAC1C,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}