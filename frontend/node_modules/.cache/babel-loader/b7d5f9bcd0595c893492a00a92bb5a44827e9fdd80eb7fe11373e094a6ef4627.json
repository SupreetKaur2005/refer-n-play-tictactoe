{"ast":null,"code":"import React,{useState,useEffect}from'react';import Board from'../components/Board/Board';import{aiMove}from'../ai/heuristicAI';// helpers\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];function checkWinner(board){for(const[a,b,c]of lines){if(board[a]&&board[a]===board[b]&&board[a]===board[c])return board[a];}if(board.every(Boolean))return'draw';return null;}export default function PlayPage(_ref){let{user,onWinReward}=_ref;const[board,setBoard]=useState(Array(9).fill(null));const[playerMark]=useState('X');// player is X\nconst[aiMark]=useState('O');const[status,setStatus]=useState('Your move');useEffect(()=>{const winner=checkWinner(board);if(winner){if(winner===playerMark){setStatus('You win!');onWinReward&&onWinReward();}else if(winner===aiMark){setStatus('AI wins');}else if(winner==='draw'){setStatus('Draw');}}},[board,playerMark,aiMark,onWinReward]);function playerPlay(idx){if(board[idx]||checkWinner(board))return;const newBoard=board.slice();newBoard[idx]=playerMark;setBoard(newBoard);// AI move (after tiny delay)\nsetTimeout(()=>{const winner=checkWinner(newBoard);if(winner)return;const move=aiMove(newBoard,aiMark,playerMark);if(move>=0){const nb=newBoard.slice();nb[move]=aiMark;setBoard(nb);}},250);}function reset(){setBoard(Array(9).fill(null));setStatus('Your move');}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tic-Tac-Toe\"}),/*#__PURE__*/_jsx(Board,{board:board,onPlay:playerPlay}),/*#__PURE__*/_jsx(\"p\",{children:status}),/*#__PURE__*/_jsx(\"button\",{onClick:reset,children:\"Reset\"})]});}","map":{"version":3,"names":["React","useState","useEffect","Board","aiMove","jsx","_jsx","jsxs","_jsxs","lines","checkWinner","board","a","b","c","every","Boolean","PlayPage","_ref","user","onWinReward","setBoard","Array","fill","playerMark","aiMark","status","setStatus","winner","playerPlay","idx","newBoard","slice","setTimeout","move","nb","reset","children","onPlay","onClick"],"sources":["D:/PersonalProjects/refer-n-play-tictactoe/frontend/src/pages/PlayPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Board from '../components/Board/Board';\r\nimport { aiMove } from '../ai/heuristicAI';\r\n\r\n// helpers\r\nconst lines = [\r\n  [0,1,2],[3,4,5],[6,7,8],\r\n  [0,3,6],[1,4,7],[2,5,8],\r\n  [0,4,8],[2,4,6]\r\n];\r\n\r\nfunction checkWinner(board){\r\n  for (const [a,b,c] of lines){\r\n    if (board[a] && board[a] === board[b] && board[a] === board[c]) return board[a];\r\n  }\r\n  if (board.every(Boolean)) return 'draw';\r\n  return null;\r\n}\r\n\r\nexport default function PlayPage({ user, onWinReward }) {\r\n  const [board,setBoard] = useState(Array(9).fill(null));\r\n  const [playerMark] = useState('X'); // player is X\r\n  const [aiMark] = useState('O');\r\n  const [status, setStatus] = useState('Your move');\r\n\r\n  useEffect(() => {\r\n    const winner = checkWinner(board);\r\n    if (winner) {\r\n      if (winner === playerMark) {\r\n        setStatus('You win!');\r\n        onWinReward && onWinReward();\r\n      } else if (winner === aiMark) {\r\n        setStatus('AI wins');\r\n      } else if (winner === 'draw') {\r\n        setStatus('Draw');\r\n      }\r\n    }\r\n  }, [board, playerMark, aiMark, onWinReward]);\r\n\r\n  function playerPlay(idx){\r\n    if (board[idx] || checkWinner(board)) return;\r\n    const newBoard = board.slice();\r\n    newBoard[idx] = playerMark;\r\n    setBoard(newBoard);\r\n\r\n    // AI move (after tiny delay)\r\n    setTimeout(() => {\r\n      const winner = checkWinner(newBoard);\r\n      if (winner) return;\r\n      const move = aiMove(newBoard, aiMark, playerMark);\r\n      if (move >= 0) {\r\n        const nb = newBoard.slice();\r\n        nb[move] = aiMark;\r\n        setBoard(nb);\r\n      }\r\n    }, 250);\r\n  }\r\n\r\n  function reset(){\r\n    setBoard(Array(9).fill(null));\r\n    setStatus('Your move');\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Tic-Tac-Toe</h2>\r\n      <Board board={board} onPlay={playerPlay} />\r\n      <p>{status}</p>\r\n      <button onClick={reset}>Reset</button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}